---
author: Albert
category: CS-基础
date: 2024-02-22
date created: 2023-05-09
date updated: 2022-12-07 23:10

tags:
  - interview
  - network
title: 计算机网络-DNS的递归查询和迭代查询
url: https://www.yuque.com/albert-tdjyy/bp5vz7/ngqbk6
---

# 计算机网络-DNS的递归查询和迭代查询

## 递归查询

- 主机向本地域名服务器的查询一般都是采用递归查询
- 如果主机所询问的本地域名服务器不知道被查询的域名的IP地址，那么本地域名服务器就以DNS客户的身份，向其它根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。
- 因此，递归查询返回的查询结果或者是所要查询的IP地址，或者是报错，表示无法查询到所需的IP地址。

## 迭代查询

- 本地域名服务器向根域名服务器发起的查询一般是迭代查询
- 当根域名服务器接收到本地域名服务器发起的查询请求的时候，要么给出所要查询的IP地址，要么告诉本地服务器；“你下一步应该去问谁”（就是给出顶级域对应的服务器的IP地址）
- 然后本地服务器依据根服务器给出的顶级域对应的服务器的IP地址，进行后续的查询。
- 顶级域服务器接收到本地域名发起的查询请求的时候，要么给出所需的IP地址，要么告诉本地域名服务器下一步应该去问谁。
- 不断重复这个过程，直到报错或者拿到需要的IP地址
- 最后，本地域名服务器把结果反馈给主机（这一步属于是递归查询了）

![image.png](http://img-blog-01.oss-cn-shanghai.aliyuncs.com/img/2022-11-27-193708.png)

![image.png](http://img-blog-01.oss-cn-shanghai.aliyuncs.com/img/2022-11-27-193709.png)

> 递归：客户端只发一次请求，要求对方给出最终结果。
> 迭代：客户端发出一次请求，对方如果没有授权回答，它就会返回一个能解答这个查询的其它名称服务器列表，
> 客户端会再向返回的列表中发出请求，直到找到最终负责所查域名的名称服务器，从它得到最终结果。
> 授权回答：向dns服务器查询一个域名，刚好这个域名是本服务器负责，返回的结果就是授权回答。

> 从递归和迭代查询可以看出：
> 客户端-本地dns服务端：这部分属于递归查询。
> 本地dns服务端---外网：这部分属于迭代查询。
> 递归查询时，返回的结果只有两种:查询成功或查询失败.
> 迭代查询，又称作重指引,返回的是最佳的查询点或者主机地址.
