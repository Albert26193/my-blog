---
author: Albert
date: 2024-03-16
date created: 2024-03-04
tags:
  - Blog
  - Network
  - Interview
title: 计算机网络-强缓存和协商缓存
---

# 计算机网络-强缓存和协商缓存

## 1. 强缓存

- 强缓存**不会向服务器发送请求**，而是直接从缓存当中读取资源。
- 合适命中强缓存呢？满足以下两个条件之一：

1. `Cache-Control: max-age` 设置了某个时间，_当前时间小于数据存储时间 + 头部 `max age` 设置的时间_。
2. `Cache-Control` 没有明确说禁用缓存，比如 `no-store/no-cache` ，同时， `Expries` 头设置的未来时间还没有到达。

---

- 比如前端代码当中，某个按扭绑定了 `Axios` 请求，点击按扭，对应的资源还在 `max-age` 设置的时间内，那么就不会发生请求，直接使用浏览器本地的缓存。

## 2. 协商缓存

- **如果不符合强缓存条件，将会尝试协商缓存**
- 当强缓存失效后，_浏览器会发送一个请求到服务器，由服务器决定是否使用缓存_。
- 这个请求就是一个普通的 `Get` 请求，会添加 `If-Modified-Since` 头（也可能是 `If-none-match` 头），_这些头部的信息来自于上次服务器发过来的 `Last-Modified` 时间或者 `Etag` 哈希值_。
- 如果命中协商缓存，返回一个 `304`，意思是，**服务器告诉客户端，你本地的资源状态是最新的，放心使用即可**。
